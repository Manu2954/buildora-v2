generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Roles for RBAC
enum Role {
  ADMIN
  SALESMAN
  CUSTOMER
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  role      Role     @default(CUSTOMER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  refreshTokens RefreshToken[]
}

model RefreshToken {
  id        String   @id @default(cuid())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    String
  token     String   @unique
  revoked   Boolean  @default(false)
  expiresAt DateTime
  createdAt DateTime @default(now())
}

// Existing CTA models
model Lead {
  id          String   @id @default(cuid())
  name        String?
  email       String?
  phone       String?
  message     String?
  location    String?
  requirement String?
  page        String?
  variant     String?
  source      String?
  utmSource   String?
  utmMedium   String?
  utmCampaign String?
  utmTerm     String?
  utmContent  String?
  fingerprint String?
  ip          String?
  userAgent   String?
  createdAt   DateTime @default(now())
}

model CtaConfig {
  key       String   @id // e.g., "cta:homepage"
  json      Json
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())
}

